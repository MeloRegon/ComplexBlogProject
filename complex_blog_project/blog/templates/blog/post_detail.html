{% extends 'base.html' %}
{% block title %}{{ post.title }} — ComplexBlog{% endblock %}

{% block content %}
  <article class="post-card">
    <h1 style="margin:0 0 8px;">{{ post.title }}</h1>
    <div class="post-meta">by @{{ post.author.username }} • {{ post.created_at|date:"M d, Y H:i" }}</div>

    {% if post.image %}
      <div class="post-image" style="margin-top:8px;">
        <img src="{{ post.image.url }}" alt="post image">
      </div>
    {% endif %}

    {% if post.content %}
      <div class="post-content">{{ post.content }}</div>
    {% endif %}

    {% if post.tags.exists %}
      <div class="tags">
        {% for tag in post.tags.all %}
          <a class="tag" href="{% url 'posts_by_tag' tag.slug %}">#{{ tag.name }}</a>
        {% endfor %}
      </div>
    {% endif %}

    {% if user == post.author %}
      <div style="margin-top:12px;">
        <a class="btn" href="{% url 'post_edit' post.pk %}">Edit</a>
        <a class="btn btn-danger" href="{% url 'delete_post' post.pk %}">Delete</a>
      </div>
    {% endif %}
  </article>

  <p style="margin-top:12px;"><a class="btn" href="{% url 'post_list' %}">← Back to posts</a></p>
{% endblock %}